{% extends "layout.html" %}

{% block title %}
    View Log
{% endblock %}

{% block main %}

<body>

    <style>

        #profilepic {
        width: 100px;
        margin-bottom: 10px;
        }

        .badge
        {
        color:white;
        
        }
        
        #paymentphoto {
        width: 40px;
        min-width: 40px;
        margin-bottom: 5px;
        flex-shrink: 0;
        }

        .hr {
          margin-top: 1rem;
          margin-bottom: 1rem;
          border: 0;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        #backtolog {
            text-decoration: none;
            color: gray;
        }
        
        </style>

    <div class="row mt-2 mb-2">
    
        <div class="col-md-2">
            <p class="text-left text-muted"><a href="/logs" id="backtolog">&#9194; Back to Logs</a></p>
        </div>
    
        <div class="col-md-8">
    
            <h3 class="text-center mt-2 mb-2">{{filters['logtype']}}</h3>
        
            <div class="row" name="filters applied">
    
                <form action="/logs" method="post">

                    <div class="hr"></div>
    
                
                    <h4 class="text-left mt-3 mb-2">Filters Applied:</h4>
    
                    
                    <div class="row mt-2 mb-2">
    
                        <div class="col-md-6">
                            <div class="form-row mb">
                                <strong>Sender</strong>
                            </div>
            
                        
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="senderPrepend">@</span>
                                    </div>
                                    {% if filtered['sender'] %}
                                    <input type="text" class="form-control is-valid" id="sender" name="sender" value="{{filters['sender']}}" placeholder="Username" autocomplete="off" readonly="true">
                                    {% endif %}
                                    {% if not filtered['sender'] %}
                                    <input type="text" class="form-control" id="sender" name="sender" autocomplete="off" readonly="true">
                                    {% endif %}
                                </div>
            
                            </div>
                        </div>
    
                        <div class="col-md-6">
                            <div class="form-row mb">
                                <strong>Recipient</strong>
                            </div>
            
                        
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="recipientPrepend">@</span>
                                    </div>
                                    {% if filtered['recipient'] %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="recipient" name="recipient" value="{{filters['recipient']}}" autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['recipient'] %}
                                    <input type="text" class="form-control" readonly="true" id="recipient" name="recipient" autocomplete="off">
                                    {% endif %}
                                
                                </div>
            
                            </div>
                        </div>
                    </div>
    
                    <div class="row mb-2">
    
                        <div class="col-md-6">
                            <div class="form-row mb">
                                <strong>Amount</strong>
                            </div>
            
                        
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="belowPrepend">Below</span>
                                    </div>
                                    {% if filtered['below'] %}
                                    <input type="number" class="form-control is-valid" readonly="true" id="below" name="below" value="{{filters['below']}}" step="any" autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['below'] %}
                                    <input type="number" class="form-control" readonly="true" id="below" name="below" step="any" autocomplete="off">
                                    {% endif %}
                                </div>
            
                            </div>
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="abovePrepend">Above</span>
                                    </div>
                                    {% if filtered['above'] %}
                                    <input type="number" class="form-control is-valid" readonly="true" id="above" name="above" value="{{filters['above']}}" step="any" autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['above'] %}
                                    <input type="number" class="form-control" readonly="true" id="above" name="above" step="any" autocomplete="off">
                                    {% endif %}
                                </div>
            
                            </div>
    
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="rangePrepend">Range</span>
                                    </div>
                                    {% if filtered['lower'] %}
                                    <input type="number" class="form-control is-valid" readonly="true" id="lower" name="lower" value="{{filters['lower']}}" step="any" autocomplete="off">
                                    <input type="number" class="form-control is-valid" readonly="true" id="upper" name="upper" value="{{filters['upper']}}" step="any" autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['lower'] %}
                                    <input type="number" class="form-control" readonly="true" id="lower" name="lower" step="any" autocomplete="off">
                                    <input type="number" class="form-control" readonly="true" id="upper" name="upper"  step="any" autocomplete="off">
                                    {% endif %}
                                </div>
    
                        </div>
                    </div>
    
                        <div class="col-md-6">
                            <div class="form-row mb">
                                <strong>Date</strong>
                            </div>
            
                        
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="daysPrepend">Past</span>
                                    </div>
                                    {% if filtered['days'] %}
                                    <input type="number" class="form-control is-valid" id="days" readonly="true" name="days" value="{{filters['days']}}"autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['days'] %}
                                    <input type="number" class="form-control" id="days" readonly="true" name="days" autocomplete="off">
                                    {% endif %}
                                </div>
            
                            </div>
    
                            <div class="form-row mb-1">
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text" id="datePrepend">Range &nbsp </span>
                                    </div>
                                    {% if filtered['todate'] %}
                                    <input type="text" class="form-control is-valid" id="fromdate" readonly="true" name="fromdate" value="{{filters['fromdate']}}" autocomplete="off">
                                    <input type="text" class="form-control is-valid" id="todate" readonly="true" name="todate" value="{{filters['todate']}}" autocomplete="off">
                                    {% endif %}
                                    {% if not filtered['todate'] %}
                                    <input type="text" class="form-control" id="fromdate" readonly="true" name="fromdate" autocomplete="off">
                                    <input type="text" class="form-control" id="todate" readonly="true" name="todate" autocomplete="off">
                                    {% endif %}
                                </div>
            
                            </div>
    
                        </div>
                    </div>
    
                    {% if filters['logtype'] != 'transferLog' %}
                    <div class="row mb-1" id="descriptionrow">
    
                        <div class="col-md-12">
    
                            <div class="form-row mb">
                                <strong>Description</strong>
                            </div>
    
                                <div class="form-row mb-1">
                                
                                    <div class = "input-group">
                                        <div class="input-group-prepend">
                                          <span class="input-group-text" id="belowPrepend">Message Match</span>
                                        </div>
                                        {% if filtered['message'] %}
                                        <input type="text" class="form-control is-valid" readonly="true" id="message" name="message" value="{{filters['message']}}" autocomplete="off">
                                        {% endif %}
                                        {% if not filtered['message'] %}
                                        <input type="text" class="form-control" readonly="true" id="message" name="message" autocomplete="off">
                                        {% endif %}
                                    </div>
            
    
                            </div>
    
                        </div>
                        </div>
                        
                            <div class="row mb-1" id="msgtagrow">
    
                                <div class="col-md-6">
                                    <div class="form-row mb-1">
                                    
                                        <div class = "input-group">
                                            <div class="input-group-prepend">
                                            <span class="input-group-text" id="abovePrepend">Message Contains</span>
                                            </div>
                                            {% if filtered['messagecontains'] %}
                                            <input type="text" class="form-control is-valid" readonly="true" id="messagecontains" name="messagecontains" value="{{filters['messagecontains']}}" autocomplete="off">
                                            {% endif %}
                                            {% if not filtered['messagecontains'] %}
                                            <input type="text" class="form-control" readonly="true" id="messagecontains" name="messagecontains"  autocomplete="off">
                                            {% endif %}

                                        </div>
                    
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-row mb-1">
                                        <div class = "input-group">
                                            <div class="input-group-prepend">
                                            <span class="input-group-text" id="abovePrepend">Tag</span>
                                            </div>
                                            {% if filtered['tag'] %}
                                            <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="{{filters['tag']}}" autocomplete="off">
                                            {% endif %}
                                            {% if not filtered['tag'] %}
                                            <input type="text" class="form-control" readonly="true" id="tag" name="tag" autocomplete="off">
                                            {% endif %}
                                        </div>
                
                                    </div>
                                </div>
    
                            </div>
                        {% endif %}        

                        {% if filters['logtype'] == 'transferLog' %}
                        <div class="form-row mb" id="transfertypelabel">
                            <strong>Transfer Type</strong>
                        </div>
    
                        <div class="form-row mb-2" id="transferrow">
                            {% if filtered['transfertype'] %}
                            
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                    <span class="input-group-text" id="transferprepend">Type</span>
                                    </div>
                                    {% if filters['transfertype'] == 'instant' %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="&#9889; Instant" autocomplete="off">
                                    {% endif %}
                                    {% if not filters['transfertype'] == 'instant' %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="&#128184; No Fee" autocomplete="off">
                                    {% endif %}
                                </div>
                                
                                
                            {% endif %}
                            {% if not filtered['transfertype'] %}
                            <div class = "input-group">
                                <div class="input-group-prepend">
                                <span class="input-group-text" id="transferprepend">Type</span>
                                </div>
                                <input type="text" class="form-control" readonly="true" id="tag" name="tag" autocomplete="off">
                            </div> 
                            {% endif %}


                        </div>
                        {% endif %}
                        {% if filters['logtype'] == 'requestLog' %}

                        <div class="form-row mb" id="requestlabel" >
                            <strong>Request Status</strong>
                        </div>
    
                        <div class="form-row mb-2" id="requestrow" >
                            {% if filtered['status'] %}
                            
                                
                                <div class = "input-group">
                                    <div class="input-group-prepend">
                                    <span class="input-group-text" id="reqprepend">Status</span>
                                    </div>
                                    {% if filters['status'] == 'pending' %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="&#8987; Pending" autocomplete="off">
                                    {% endif %}
                                    {% if filters['status'] == 'accepted' %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="&#9989; Accepted" autocomplete="off">
                                    {% endif %}
                                    {% if filters['status'] == 'denied' %}
                                    <input type="text" class="form-control is-valid" readonly="true" id="tag" name="tag" value="&#x1F6AB; Denied" autocomplete="off">
                                    {% endif %}
                                </div>
                                
                                
                            {% endif %}
                            {% if not filtered['status'] %}
                            <div class = "input-group">
                                <div class="input-group-prepend">
                                <span class="input-group-text" id="reqprepend">Status</span>
                                </div>
                                <input type="text" class="form-control" readonly="true" id="tag" name="tag" autocomplete="off">
                            </div> 
                            {% endif %}
                        </div>
                        {% endif %}
                                        
                </form>
    

    
            </div>
    
    
        </div>
    
        <div class="col-md-2"></div>
    
    </div>

    
    
    <div class="row">

        <div class="col-md-2"></div>

        <div class="col-md-8">

            <div class="hr"></div>
    
            <h4 class="text-left mt-3">Log Results:</h4>
            <h6 class="text-left mb-2">{{log|length}} results</h6>

            {% if filters['logtype'] == 'personalLog' %}

                {% if log|length != 0%}
                <ul class="list-group list-group-flush">
                {% for elem in log %}
                    {% set senderID = elem[0] %}
                    {% set recipientID = elem[1] %}
                    {% set amount = "{:.2f}".format(elem[2]) %}
                    {% set date = elem[3] %}
                    {% set date = date|string %}
                    {% set date = date[0:10] %}
                    {% set message = elem[4]%}
                    {% set paymentID = elem[5] %}
                    {% set privacy = elem[6] %}
                    {% set tag = elem[7] %}
                    {% set senderBalance = elem[8] %}
                    {% set recipientBalance = elem[9] %}
                    {% set status = elem[10]%}
                    {% set sender = False %}
                    {% if userID == senderID %}
                    {% set sender = True %}
                    {% endif %}
        
                {% if status == "_payment" %}
                <a href="#" class="list-group-item list-group-item-action">
                    <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >
                        {% set firstchar = senderID[0] %}
                        {% if firstchar.isalpha() %}
                        {% set firstchar = firstchar.upper() %}
                        {% endif %}    
                        <img id="paymentphoto" src="/static/{{ firstchar }}.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                    <div class="d-flex w-100 justify-content-between">
                        {% if sender %}
                        <h5 class="mb-1"><strong>You</strong> paid <strong>{{ recipientID }}</strong>  <strong><font color="#cc4c4c">${{ amount }}</font></strong></h5>
                        {% endif %}
                        {% if not sender %}
                        <h5 class="mb-1"><strong>{{ senderID }}</strong> paid <strong>you</strong>  <strong><font color="#4b8b4e">${{ amount }}</font></strong></h5>
                        {% endif %}
                          {% if tag != None%}
                    <small>{{ date }}<br><span class="badge bg-primary rounded-pill float-right">{{tag}}</span></small>              
                    {% endif %}
                    {% if tag == None %}
                    <small>{{ date }}</small>  
                    {% endif %}
        
                    </div>
                    <p class="text-left mb-1">{{message}}</p>
        
                    {% if sender %}
                    {% if privacy == "Public" %}
                    <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Private" %}
                    <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Friends Only" %}
                    <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
        
                    {% endif %}
        
                    {% if not sender %}
                    {% if privacy == "Public" %}
                    <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Private" %}
                    <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Friends Only" %}
                    <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% endif %}
                </div>
                </div>
                </a>
                {% endif %}
                {% if status == "request" %}
                <a href="#" class="list-group-item list-group-item-action">
                    <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >
                        {% set firstchar = recipientID[0] %}
                        {% if firstchar.isalpha() %}
                        {% set firstchar = firstchar.upper() %}
                        {% endif %}
    
                        <img id="paymentphoto" src="/static/{{ firstchar }}.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                        <div class="d-flex w-100 justify-content-between">
                            {% if sender %}
                            <h5 class="mb-1"><strong>{{ recipientID }}</strong> requested <strong>you</strong> $<strong>{{ amount }}</strong></h5>
                            {% endif %}
                            {% if not sender %}
                            <h5 class="mb-1"><strong>You</strong> requested <strong>{{ senderID }}</strong> $<strong>{{ amount }}</strong></h5>
                            {% endif %}
                              <small>{{ date }}<br><span id ="requesttag" class="badge bg-success rounded-pill float-right">request</span></small>              
                        
                        </div>

                        <p class="text-left mb-1">{{message}}</p>
                        <small>Request ID: {{paymentID}}.</small>
                        
                    </div>

                    </div>
                </a>
                    
                {% endif %}

                {% if status == "transfer" %}
                <a href="#" class="list-group-item list-group-item-action">
                    <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >
                        <img id="paymentphoto" src="/static/bank.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                    <div class="d-flex w-100 justify-content-between">
                  <h5 class="mb-1"><strong>Bank Transfer</strong> initiated for <strong><font color="#cc4c4c">${{ amount }}</font></strong>  </h5>
                    <small>{{ date }}<br><span id ="transfertag" class="badge bg-info rounded-pill float-right">transfer</span></small>              
                    </div>
                    {% set destination = "*****" + recipientID[5:] %}
                    <small>Destination: {{destination}}.</small>
                    <small>Transfer ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    </div>
                </div>
                </a>
                {% endif %}
        
                {% endfor %}
                </ul>
                {% endif %}

            {% endif %}

            {% if filters['logtype'] == 'friendLog' %}

                {% if log|length != 0%}
                <ul class="list-group list-group-flush">
                {% for elem in log %}
                    {% set senderID = elem[0] %}
                    {% set recipientID = elem[1] %}
                    {% set amount = "{:.2f}".format(elem[2]) %}
                    {% set date = elem[3] %}
                    {% set date = date|string %}
                    {% set date = date[0:10] %}
                    {% set message = elem[4]%}
                    {% set paymentID = elem[5] %}
                    {% set privacy = elem[6] %}
                    {% set tag = elem[7] %}
                    {% set senderBalance = elem[8] %}
                    {% set recipientBalance = elem[9] %}
                    {% set status = elem[10]%}
                    {% if userID == senderID or userID == recipientID %}
                    {% set userinvolved = True %}
                    {% endif %}
                    {% if userinvolved %}
                    {% set sender = False %}
                    {% if userID == senderID %}
                    {% set sender = True %}
                    {% endif %}
                    {% endif %}
        
                {% if status == "_payment" %}
                <a href="#" class="list-group-item list-group-item-action">
                    <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >

                        {% set firstchar = senderID[0] %}
                        {% if firstchar.isalpha() %}
                        {% set firstchar = firstchar.upper() %}
                        {% endif %}    

                        <img id="paymentphoto" src="/static/{{ firstchar }}.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                    <div class="d-flex w-100 justify-content-between">
                        {% if not userinvolved %}
                        <h5 class="mb-1"><strong>{{ senderID }}</strong> paid <strong>{{ recipientID }}</strong>  $<strong>{{ amount }}</strong></h5>
                        {% endif %}
                        {% if userinvolved %}
                        {% if sender %}
                        <h5 class="mb-1"><strong>You</strong> paid <strong>{{ recipientID }}</strong>  <strong><font color="#cc4c4c">${{ amount }}</font></strong></h5>
                        {% else %}
                        <h5 class="mb-1"><strong>{{ senderID }}</strong> paid <strong>you</strong>  <strong><font color="#4b8b4e">${{ amount }}</font></strong></h5>
                        {% endif %}
                        {% endif %}
                          {% if tag != None%}
                    <small>{{ date }}<br><span class="badge bg-primary rounded-pill float-right">{{tag}}</span></small>              
                    {% endif %}
                    {% if tag == None %}
                    <small>{{ date }}</small>  
                    {% endif %}
        
                    </div>
                    <p class="mb-1">{{message}}</p>

                    {% if not userinvolved %}
                    {% if privacy == "Public" %}
                    <small>&#127758; Payment ID: {{paymentID}}.</small>
                    {% endif %}
                    {% if privacy == "Private" %}
                    <small>&#128274; Payment ID: {{paymentID}}.</small>
                    {% endif %}
                    {% if privacy == "Friends Only" %}
                    <small>&#128101; Payment ID: {{paymentID}}.</small>
                    {% endif %}
        
                    {% endif %}
                    
                    {% if userinvolved %}
                    {% if sender %}
                    {% if privacy == "Public" %}
                    <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Private" %}
                    <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Friends Only" %}
                    <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                    {% endif %}
        
                    {% endif %}
        
                    {% if not sender %}
                    {% if privacy == "Public" %}
                    <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Private" %}
                    <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% if privacy == "Friends Only" %}
                    <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                    {% endif %}
                    {% endif %}
                    {% endif %}
                </div>
                </div>
                </a>
                {% endif %}
                {% if status == "request" %}
                <a href="#" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1"><strong>{{ recipientID }}</strong> requested <strong>{{ senderID }}</strong> $<strong>{{ amount }}</strong></h5>
                    <small>{{ date }}<br><span id ="requesttag" class="badge bg-success rounded-pill float-right">request</span></small>              
                    </div>
                    <p class="mb-1">{{message}}</p>
                    <small>Request ID: {{paymentID}}.</small>
                </a>
                {% endif %}
                {% if status == "transfer" %}
                <a href="#" class="list-group-item list-group-item-action">
        
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1"><strong>Bank Transfer</strong> initiated for <strong><font color="#cc4c4c">${{ amount }}</font></strong><  </h5>
                        <small>{{ date }}<br><span id ="transfertag" class="badge bg-info rounded-pill float-right">transfer</span></small>              
                    </div>
                    {% set destination = "*****" + recipientID[5:] %}
                    <small>Destination: {{destination}}.</small>
                    <small>Transfer ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
        
                </a>
                {% endif %}
        
                {% endfor %}
                </ul>
                {% endif %}

            {% endif %}

            {% if filters['logtype'] == 'globalLog' %}

                {% if log|length != 0%}
                    <ul class="list-group list-group-flush">
                    {% for elem in log %}
                        {% set senderID = elem[0] %}
                        {% set recipientID = elem[1] %}
                        {% set amount = "{:.2f}".format(elem[2]) %}
                        {% set date = elem[3] %}
                        {% set date = date|string %}
                        {% set date = date[0:10] %}
                        {% set message = elem[4]%}
                        {% set paymentID = elem[5] %}
                        {% set privacy = elem[6] %}
                        {% set tag = elem[7] %}
                        {% set senderBalance = elem[8] %}
                        {% set recipientBalance = elem[9] %}
                        {% set status = elem[10]%}
                        {% if userID == senderID or userID == recipientID %}
                        {% set userinvolved = True %}
                        {% endif %}
                        {% if userinvolved %}
                        {% set sender = False %}
                        {% if userID == senderID %}
                        {% set sender = True %}
                        {% endif %}
                        {% endif %}
            
                    {% if status == "_payment" %}
                    <a href="#" class="list-group-item list-group-item-action">
                        <div class="row">
                        <div class="col-2 col-lg-1 mr-auto" >
                            {% set firstchar = senderID[0] %}
                            {% if firstchar.isalpha() %}
                            {% set firstchar = firstchar.upper() %}
                            {% endif %}        
                            <img id="paymentphoto" src="/static/{{ firstchar }}.png">
                        </div>
                        <div class="col-10 col-lg-11 ml-auto">
                        <div class="d-flex w-100 justify-content-between">
                            {% if not userinvolved %}
                            <h5 class="mb-1"><strong>{{ senderID }}</strong> paid <strong>{{ recipientID }}</strong>  $<strong>{{ amount }}</strong></h5>
                            {% endif %}
                            {% if userinvolved %}
                            {% if sender %}
                            <h5 class="mb-1"><strong>You</strong> paid <strong>{{ recipientID }}</strong>  <strong><font color="#cc4c4c">${{ amount }}</font></strong></h5>
                            {% else %}
                            <h5 class="mb-1"><strong>{{ senderID }}</strong> paid <strong>you</strong>  <strong><font color="#4b8b4e">${{ amount }}</font></strong></h5>
                            {% endif %}
                            {% endif %}
                              {% if tag != None%}
                        <small>{{ date }}<br><span class="badge bg-primary rounded-pill float-right">{{tag}}</span></small>              
                        {% endif %}
                        {% if tag == None %}
                        <small>{{ date }}</small>  
                        {% endif %}
            
                        </div>
                        <p class="mb-1">{{message}}</p>
        
                        {% if not userinvolved %}
                        {% if privacy == "Public" %}
                        <small>&#127758; Payment ID: {{paymentID}}.</small>
                        {% endif %}
                        {% if privacy == "Private" %}
                        <small>&#128274; Payment ID: {{paymentID}}.</small>
                        {% endif %}
                        {% if privacy == "Friends Only" %}
                        <small>&#128101; Payment ID: {{paymentID}}.</small>
                        {% endif %}
            
                        {% endif %}
                        
                        {% if userinvolved %}
                        {% if sender %}
                        {% if privacy == "Public" %}
                        <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                        {% endif %}
                        {% if privacy == "Private" %}
                        <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                        {% endif %}
                        {% if privacy == "Friends Only" %}
                        <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                        {% endif %}
            
                        {% endif %}
            
                        {% if not sender %}
                        {% if privacy == "Public" %}
                        <small>&#127758; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                        {% endif %}
                        {% if privacy == "Private" %}
                        <small>&#128274; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                        {% endif %}
                        {% if privacy == "Friends Only" %}
                        <small>&#128101; Payment ID: {{paymentID}}. Balance: ${{"{:.2f}".format(recipientBalance)}}.</small>
                        {% endif %}
                        {% endif %}
                        {% endif %}
                    </div>
                    </div>
                    </a>
                    {% endif %}
                    {% if status == "request" %}
                    <a href="#" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1"><strong>{{ recipientID }}</strong> requested <strong>{{ senderID }}</strong> $<strong>{{ amount }}</strong></h5>
                        <small>{{ date }}<br><span id ="requesttag" class="badge bg-success rounded-pill float-right">request</span></small>              
                        </div>
                        <p class="mb-1">{{message}}</p>
                        <small>Request ID: {{paymentID}}.</small>
                    </a>
                    {% endif %}
                    {% if status == "transfer" %}
                    <a href="#" class="list-group-item list-group-item-action">
            
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1"><strong>Bank Transfer</strong> initiated for <strong><font color="#cc4c4c">${{ amount }}</font></strong>  </h5>
                            <small>{{ date }}<br><span id ="transfertag" class="badge bg-info rounded-pill float-right">transfer</span></small>              
                        </div>
                        {% set destination = "*****" + recipientID[5:] %}
                        <small>Destination: {{destination}}.</small>
                        <small>Transfer ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
            
                    </a>
                    {% endif %}
            
                    {% endfor %}
                    </ul>
                    {% endif %}

            {% endif %}

            {% if filters['logtype'] == 'transferLog' %}

                {% if log|length != 0%}
                <ul class="list-group list-group-flush">
                {% for elem in log %}
                
                    {% set senderID = elem[0] %}
                    {% set recipientID = elem[1] %}
                    {% set amount = "{:.2f}".format(elem[2]) %}
                    {% set date = elem[3] %}
                    {% set date = date|string %}
                    {% set date = date[0:10] %}
                    {% set paymentID = elem[4] %}
                    {% set senderBalance = elem[5] %}
                    {% set message = elem[6] %}
                    
                <a href="#" class="list-group-item list-group-item-action">
                <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >
                    <img id="paymentphoto" src="/static/bank.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1"><strong>Bank Transfer</strong> initiated for <strong><font color="#cc4c4c">${{ amount }}</font></strong>  </h5>
                    {% if message == "No Fee Transfer" %}
                    <small>{{ date }}<br><span id ="transfertag" class="badge bg-success rounded-pill float-right">no fee transfer</span></small>   
                    {% endif %}
                    {% if message == "Instant Transfer" %}
                    <small>{{ date }}<br><span id ="transfertag" class="badge bg-warning rounded-pill float-right">instant transfer</span></small>   
                    {% endif %}           
                </div>
                {% set destination = "*****" + recipientID[5:] %}
                <small>Destination: {{destination}}.</small>
                <small>Transfer ID: {{paymentID}}. Balance: ${{"{:.2f}".format(senderBalance)}}.</small>
                </div>
            </div>
                </a>
                {% endfor %}
                {% endif %}

            {% endif %}

            {% if filters['logtype'] == 'requestLog' %}

                {% if log|length != 0%}
                <ul class="list-group list-group-flush">
                {% for elem in log %}
            
                    {% set senderID = elem[0] %}
                    {% set recipientID = elem[1] %}
                    {% set amount = "{:.2f}".format(elem[2]) %}
                    {% set date = elem[3] %}
                    {% set date = date|string %}
                    {% set date = date[0:10] %}
                    {% set status = elem[4]%}
                    {% set message = elem[5] %}
                    {% set tag = elem[6] %}
                    {% set paymentID = elem[7] %}
                    {% set sender = False %}
                    {% if userID == senderID %}
                    {% set sender = True %}
                    {% endif %}
    
        
                <a href="#" class="list-group-item list-group-item-action">
                <div class="row">
                    <div class="col-2 col-lg-1 mr-auto" >
                        {% set firstchar = recipientID[0] %}
                        {% if firstchar.isalpha() %}
                        {% set firstchar = firstchar.upper() %}
                        {% endif %}
    
                    <img id="paymentphoto" src="/static/{{ firstchar }}.png">
                    </div>
                    <div class="col-10 col-lg-11 ml-auto">
                    <div class="d-flex w-100 justify-content-between">
                        {% if sender%}
                        <h5 class="mb-1"><strong>{{ recipientID }}</strong> requested <strong>you</strong> $<strong>{{ amount }}</strong></h5>
                        {% else %}
                        <h5 class="mb-1"><strong>You</strong> requested <strong>{{ senderID }}</strong> $<strong>{{ amount }}</strong></h5>
                        {% endif %}
                            
                        {% if status == "request" %}
                        <small>{{ date }}<br><span id ="requesttag" class="badge bg-warning rounded-pill float-right">pending</span></small>              
                        {% endif %}

                        {% if status == "denied_request" %}
                        <small>{{ date }}<br><span id ="requesttag" class="badge bg-danger rounded-pill float-right">denied</span></small>              
                        {% endif %}

                        {% if status == "accepted_request" %}
                        <small>{{ date }}<br><span id ="requesttag" class="badge bg-success rounded-pill float-right">accepted</span></small>              
                        {% endif %}

                    </div>

                    <p class="text-left mb-1">{{message}}</p>
                    <small>Request ID: {{paymentID}}.</small>
                    
                    </div>

                </div>
                </a>
                {% endfor %}
            </ul>
                {% endif %}

            {% endif %}

            
        </div>

        <div class="col-md-2"></div>


    </div>



    </body>    

{% endblock %}